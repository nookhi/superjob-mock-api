openapi: 3.0.0
info:
  title: superjob-mock-api
  version: 1.0.0
  description: Mock API для получения резюме по ID и создания вакансий
paths:
  /2.0/resumes/{id}/:
    get:
      summary: Получить резюме по ID
      parameters:
        - name: id
          in: path
          description: Идентификатор резюме
          required: true
          schema:
            type: integer
            example: 123456
      responses:
        '200':
          description: Успешный ответ
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                    example: 1111111
        '404':
          description: Резюме не найдено
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Resume not found

  /2.0/vacancies/:
    post:
      summary: Создать новую вакансию
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                profession:
                  type: string
                  example: "Разработчик Python"
                  description: Название вакансии
                turbo:
                  type: integer
                  enum: [0, 1]
                  example: 0
                  description: Турбо-вакансия или нет
                town:
                  type: integer
                  example: 4
                  description: Город (значения можно получить в /towns)
                published:
                  type: integer
                  enum: [0, 1]
                  example: 1
                  description: "Тип доступа: 0 — закрытый, 1 — открытый"
                id_user:
                  type: integer
                  example: 12345
                  description: ID пользователя
                catalogues:
                  type: array
                  items:
                    type: integer
                  example: [100, 200]
                  description: Сферы деятельности (максимум 5)
                code:
                  type: string
                  example: "VAC-12345"
                  description: Код вакансии
                external_url:
                  type: string
                  example: "https://example.com/vacancy"
                  description: URL внешнего сайта
                work:
                  type: string
                  example: "Разработка backend-компонентов на Python"
                  description: Должностные обязанности
                compensation:
                  type: string
                  example: "Оклад от 100 000 до 150 000 руб."
                  description: Условия работы
                candidat:
                  type: string
                  example: "Знание Python, опыт работы от 3 лет"
                  description: Требования к кандидату
                type_of_work:
                  type: integer
                  enum: [6, 10, 12, 13, 7, 9]
                  example: 6
                  description: Тип занятости
                place_of_work:
                  type: integer
                  enum: [1, 2, 3]
                  example: 1
                  description: Место работы
                education:
                  type: integer
                  enum: [2, 3, 4, 5, 6]
                  example: 2
                  description: Образование
                experience:
                  type: integer
                  enum: [1, 2, 3, 4]
                  example: 3
                  description: Опыт работы
                maritalstatus:
                  type: integer
                  enum: [0, 2, 3]
                  example: 0
                  description: Семейное положение
                children:
                  type: integer
                  enum: [0, 2, 3]
                  example: 0
                  description: Наличие детей
                languages:
                  type: array
                  items:
                    type: object
                    properties:
                      id_language:
                        type: integer
                        example: 4
                      level:
                        type: integer
                        example: 1
                    required: ["id_language", "level"]
                  example:
                    - id_language: 4
                      level: 1
                  description: Языки и уровень владения
                contact:
                  type: string
                  example: "Иван Петров"
                  description: Контактное лицо
                email:
                  type: string
                  example: "hr@example.com"
                  description: Email
                url:
                  type: string
                  example: "https://example.com"
                  description: Адрес сайта компании
                phones:
                  type: array
                  items:
                    type: object
                    properties:
                      country_code:
                        type: integer
                        example: 7
                      city_code:
                        type: integer
                        example: 499
                      number:
                        type: integer
                        example: 7870000
                      additional:
                        type: string
                        example: "Доб. 03"
                    required: ["country_code", "city_code", "number"]
                  example:
                    - country_code: 7
                      city_code: 499
                      number: 7870000
                      additional: "Доб. 03"
                  description: Телефоны
                driving_licence:
                  type: array
                  items:
                    type: string
                    enum: ['A', 'B', 'C', 'D', 'E']
                  example: ['B']
                  description: Водительские права
                metro:
                  type: array
                  items:
                    type: integer
                  example: [101, 102]
                  description: Станции метро
                payment_from:
                  type: integer
                  example: 100000
                  description: Оклад от
                payment_to:
                  type: integer
                  example: 150000
                  description: Оклад до
                moveable:
                  type: boolean
                  example: true
                  description: Готовность к переезду
                gender:
                  type: integer
                  enum: [0, 2, 3]
                  example: 0
                  description: Пол
                age_from:
                  type: integer
                  example: 25
                  description: Возраст от
                age_to:
                  type: integer
                  example: 40
                  description: Возраст до
                firm_name:
                  type: string
                  example: "ООО Пример"
                  description: Название компании
                firm_activity:
                  type: string
                  example: "Разработка программного обеспечения"
                  description: Деятельность компании
                address:
                  type: string
                  example: "ул. Пушкина, д. Колотушкина"
                  description: Адрес работодателя
                anonymous:
                  type: boolean
                  example: false
                  description: Анонимная ли вакансия
                refresh_vac:
                  type: boolean
                  example: true
                  description: Автообновление вакансии
                extend_vac:
                  type: boolean
                  example: true
                  description: Автопродление вакансии
                resumesubscription_status:
                  type: boolean
                  example: true
                  description: Подписка на резюме
                resumesubscription_keywords:
                  type: string
                  example: "Python, Django"
                  description: Ключевые слова подписки
                resumesubscription_kwc:
                  type: string
                  enum: ["or", "and", "particular"]
                  example: "or"
                  description: Логика поиска слов
                resumesubscription_rws:
                  type: integer
                  enum: [7, 250, 50, 60, 8, 3, 6, 2]
                  example: 50
                  description: Где искать слова в резюме
              required:
                - profession
                - town
                - published
                - catalogues
      responses:
        '200':
          description: Вакансия успешно создана
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                    example: 987654
        '400':
          description: Ошибка валидации данных
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "error"
                  errors:
                    type: array
                    items:
                      type: string
                      example: "profession, town, published, catalogues is required"
  /2.0/vacancies/{id}/:
    put:
      summary: Обновить информацию о вакансии
      parameters:
        - name: id
          in: path
          description: Идентификатор вакансии
          required: true
          schema:
            type: integer
            example: 987654
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                profession:
                  type: string
                  example: "Разработчик Python"
                  description: Название вакансии
                turbo:
                  type: integer
                  enum: [0, 1]
                  example: 0
                  description: Турбо-вакансия или нет
                town:
                  type: integer
                  example: 4
                  description: Город (значения можно получить в /towns)
                published:
                  type: integer
                  enum: [0, 1]
                  example: 1
                  description: "Тип доступа: 0 — закрытый, 1 — открытый"
                id_user:
                  type: integer
                  example: 12345
                  description: ID пользователя
                catalogues:
                  type: array
                  items:
                    type: integer
                  example: [100, 200]
                  description: Сферы деятельности (максимум 5)
                code:
                  type: string
                  example: "VAC-12345"
                  description: Код вакансии
                external_url:
                  type: string
                  example: "https://example.com/vacancy"
                  description: URL внешнего сайта
                work:
                  type: string
                  example: "Разработка backend-компонентов на Python"
                  description: Должностные обязанности
                compensation:
                  type: string
                  example: "Оклад от 100 000 до 150 000 руб."
                  description: Условия работы
                candidat:
                  type: string
                  example: "Знание Python, опыт работы от 3 лет"
                  description: Требования к кандидату
                type_of_work:
                  type: integer
                  enum: [6, 10, 12, 13, 7, 9]
                  example: 6
                  description: Тип занятости
                place_of_work:
                  type: integer
                  enum: [1, 2, 3]
                  example: 1
                  description: Место работы
                education:
                  type: integer
                  enum: [2, 3, 4, 5, 6]
                  example: 2
                  description: Образование
                experience:
                  type: integer
                  enum: [1, 2, 3, 4]
                  example: 3
                  description: Опыт работы
                maritalstatus:
                  type: integer
                  enum: [0, 2, 3]
                  example: 0
                  description: Семейное положение
                children:
                  type: integer
                  enum: [0, 2, 3]
                  example: 0
                  description: Наличие детей
                languages:
                  type: array
                  items:
                    type: object
                    properties:
                      id_language:
                        type: integer
                        example: 4
                      level:
                        type: integer
                        example: 1
                    required: ["id_language", "level"]
                  example:
                    - id_language: 4
                      level: 1
                  description: Языки и уровень владения
                contact:
                  type: string
                  example: "Иван Петров"
                  description: Контактное лицо
                email:
                  type: string
                  example: "hr@example.com"
                  description: Email
                url:
                  type: string
                  example: "https://example.com"
                  description: Адрес сайта компании
                phones:
                  type: array
                  items:
                    type: object
                    properties:
                      country_code:
                        type: integer
                        example: 7
                      city_code:
                        type: integer
                        example: 499
                      number:
                        type: integer
                        example: 7870000
                      additional:
                        type: string
                        example: "Доб. 03"
                    required: ["country_code", "city_code", "number"]
                  example:
                    - country_code: 7
                      city_code: 499
                      number: 7870000
                      additional: "Доб. 03"
                  description: Телефоны
                driving_licence:
                  type: array
                  items:
                    type: string
                    enum: ['A', 'B', 'C', 'D', 'E']
                  example: ['B']
                  description: Водительские права
                metro:
                  type: array
                  items:
                    type: integer
                  example: [101, 102]
                  description: Станции метро
                payment_from:
                  type: integer
                  example: 100000
                  description: Оклад от
                payment_to:
                  type: integer
                  example: 150000
                  description: Оклад до
                moveable:
                  type: boolean
                  example: true
                  description: Готовность к переезду
                gender:
                  type: integer
                  enum: [0, 2, 3]
                  example: 0
                  description: Пол
                age_from:
                  type: integer
                  example: 25
                  description: Возраст от
                age_to:
                  type: integer
                  example: 40
                  description: Возраст до
                firm_name:
                  type: string
                  example: "ООО Пример"
                  description: Название компании
                firm_activity:
                  type: string
                  example: "Разработка программного обеспечения"
                  description: Деятельность компании
                address:
                  type: string
                  example: "ул. Пушкина, д. Колотушкина"
                  description: Адрес работодателя
                anonymous:
                  type: boolean
                  example: false
                  description: Анонимная ли вакансия
                refresh_vac:
                  type: boolean
                  example: true
                  description: Автообновление вакансии
                extend_vac:
                  type: boolean
                  example: true
                  description: Автопродление вакансии
                resumesubscription_status:
                  type: boolean
                  example: true
                  description: Подписка на резюме
                resumesubscription_keywords:
                  type: string
                  example: "Python, Django"
                  description: Ключевые слова подписки
                resumesubscription_kwc:
                  type: string
                  enum: ["or", "and", "particular"]
                  example: "or"
                  description: Логика поиска слов
                resumesubscription_rws:
                  type: integer
                  enum: [7, 250, 50, 60, 8, 3, 6, 2]
                  example: 50
                  description: Где искать слова в резюме
              required:
                - profession
                - town
                - published
                - catalogues
      responses:
        '200':
          description: Вакансия успешно обновлена
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                    example: 987654
        '400':
          description: Ошибка валидации данных
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "error"
                  errors:
                    type: array
                    items:
                      type: string
                      example: "profession, town, published, catalogues is required"
  /2.0/vacancies/{id}/republish/:
    put:
      summary: Восстановление вакансии из архива
      description: Повторное размещение вакансии, ранее находившейся в архиве.
      parameters:
        - name: id
          in: path
          description: Идентификатор вакансии
          required: true
          schema:
            type: integer
            example: 555
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                turbo:
                  type: integer
                  enum: [0, 1]
                  example: 0
                  description: Включить ли турбо-вакансию при повторном размещении
                town:
                  type: integer
                  example: 4
                  description: Город (работает только при восстановлении из архива)
      responses:
        '200':
          description: Вакансия успешно восстановлена
          content: {}
  /2.0/vacancies/{id}/archive/:
    put:
      summary: Перенос вакансии в архив
      description: Архивирует указанную вакансию. Если вакансия уже в архиве — возвращается ошибка 403.
      parameters:
        - name: id
          in: path
          description: Идентификатор вакансии
          required: true
          schema:
            type: integer
            example: 555
      responses:
        '204':
          description: Вакансия успешно архивирована
        '403':
          description: Вакансия уже находится в архиве
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Vacancy is already archived"
  /2.0/resumes/received/{id_vac}/:
    get:
      summary: Получить список откликов на вакансию
      description: Возвращает список резюме, откликнувшихся на вакансию с указанным id.
      parameters:
        - name: id_vac
          in: path
          description: Идентификатор вакансии
          required: true
          schema:
            type: integer
            example: 555
        - name: only_new_received
          in: query
          description: Показывать только новые резюме (установите параметр равным 1)
          required: false
          schema:
            type: integer
            enum: [0, 1]
            example: 1
      responses:
        '200':
          description: Успешный ответ
          content:
            application/json:
              schema:
                type: object
                properties:
                  objects:
                    type: array
                    items:
                      type: object
                      properties:
                        resume:
                          type: object
                          description: Стандартное резюме
                          properties:
                            id:
                              type: integer
                              example: 123456
                            # Здесь можно расширить структуру резюме по необходимости
                        cover_letter:
                          type: string
                          example: "Сопроводительное письмо"
                        events:
                          type: array
                          items:
                            type: object
                            description: История событий
                            properties:
                              event_type:
                                type: string
                                example: "viewed"
                              timestamp:
                                type: string
                                format: date-time
                                example: "2025-04-05T12:34:56Z"
                  total:
                    type: integer
                    example: 3
                  more:
                    type: boolean
                    example: false
        '404':
          description: Вакансия не найдена
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Vacancy not found"
